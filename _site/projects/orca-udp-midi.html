<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width">
        <title>Orca Udp Midi</title>
        <link href="/assets/css/main.css" rel="stylesheet"/>
    </head>
    <body class="project">
    <div id="top"></div>
    <input name="site-nav-toggle" id="site-nav-toggle" class="invisible" type="checkbox" value=""/>
    <label for="site-nav-toggle" class="site-header site-header--project">
        <h1 class="site-header__title lace">Projects</h1>
    </label>
    <label for="site-nav-toggle" class="site-nav-screen dither dither--3"></label>
    <nav class="site-nav site-nav--project white dither">
        <ul class="projects-list site-nav__items">

    
     
        <li class="site-nav__item">
            <input class="collection-toggle-input invisible" name="tools-toggle" id="tools-toggle" type="checkbox" value=""/>
            <div class="site-nav__expanded-margin">
                <div class="site-nav__folder-icon"></div>
            </div>
            <div class="site-nav__collection">
                <label for="tools-toggle" class="collection-toggle">
                    <h2 class="site-nav__heading">Software Tools</h2>
                    <div class="site-nav__arrow-icon"></div>
                    <p class="site-nav__body collection-body">Software Tools I've made or configured for my day-to-day use</p>
                    <div class="project__icons project__icons--collection">
                        
                        
                        
                        
                        
                            <div class="project__icon icon-sound"></div>
                        
                            <div class="project__icon icon-code"></div>
                        
                    </div>
                    <p class="site-nav__body collection-body-alternate">
                        Projects
                    </p>
                </label>
                <ul class="site-nav__projects dither">
                    
                        <li class="site-nav__project">
                            <a class="project__link" href="/projects/orca-udp-midi">
                                <div class="project__body">
                                    <h3 class="project__heading">
                                        ORCΛ UDP MIDI Translator
                                    </h3>
                                    <div class="project__description">
                                        A UDP-to-MIDI translator Pd utility for the ORCΛ live-coding environment
                                    </div>
                                </div>
                                <div class="project__icons">
                                    
                                        <div class="project__icon icon-sound"></div>
                                    
                                        <div class="project__icon icon-code"></div>
                                    
                                </div>
                            </a>
                        </li>
                    
                </ul>
            </div>
        </li>
     
        <li class="site-nav__item">
            <input class="collection-toggle-input invisible" name="new-media-toggle" id="new-media-toggle" type="checkbox" value=""/>
            <div class="site-nav__expanded-margin">
                <div class="site-nav__folder-icon"></div>
            </div>
            <div class="site-nav__collection">
                <label for="new-media-toggle" class="collection-toggle">
                    <h2 class="site-nav__heading">New Media Projects</h2>
                    <div class="site-nav__arrow-icon"></div>
                    <p class="site-nav__body collection-body">Interactive and multimedia works</p>
                    <div class="project__icons project__icons--collection">
                        
                        
                        
                        
                        
                            <div class="project__icon icon-sound"></div>
                        
                            <div class="project__icon icon-code"></div>
                        
                    </div>
                    <p class="site-nav__body collection-body-alternate">
                        Projects
                    </p>
                </label>
                <ul class="site-nav__projects dither">
                    
                        <li class="site-nav__project">
                            <a class="project__link" href="/projects/electric-singing-bowl">
                                <div class="project__body">
                                    <h3 class="project__heading">
                                        Electric Singing Bowl
                                    </h3>
                                    <div class="project__description">
                                        A multichannel audio installation
                                    </div>
                                </div>
                                <div class="project__icons">
                                    
                                        <div class="project__icon icon-sound"></div>
                                    
                                        <div class="project__icon icon-code"></div>
                                    
                                </div>
                            </a>
                        </li>
                    
                </ul>
            </div>
        </li>
     
        <li class="site-nav__item">
            <input class="collection-toggle-input invisible" name="super-deluxe-toggle" id="super-deluxe-toggle" type="checkbox" value=""/>
            <div class="site-nav__expanded-margin">
                <div class="site-nav__folder-icon"></div>
            </div>
            <div class="site-nav__collection">
                <label for="super-deluxe-toggle" class="collection-toggle">
                    <h2 class="site-nav__heading">Super Deluxe</h2>
                    <div class="site-nav__arrow-icon"></div>
                    <p class="site-nav__body collection-body">Graphic design and Shopify development for the Super Deluxe Store; UI design and front-end development for a game show prototype. RIP☠︎</p>
                    <div class="project__icons project__icons--collection">
                        
                        
                        
                        
                        
                            <div class="project__icon icon-graphic"></div>
                        
                            <div class="project__icon icon-code"></div>
                        
                            <div class="project__icon icon-ux"></div>
                        
                    </div>
                    <p class="site-nav__body collection-body-alternate">
                        Projects
                    </p>
                </label>
                <ul class="site-nav__projects dither">
                    
                        <li class="site-nav__project">
                            <a class="project__link" href="/projects/super-deluxe-store">
                                <div class="project__body">
                                    <h3 class="project__heading">
                                        Super Deluxe Shopify Store
                                    </h3>
                                    <div class="project__description">
                                        Graphic Design and Shopify Development for the Super Deluxe Store
                                    </div>
                                </div>
                                <div class="project__icons">
                                    
                                        <div class="project__icon icon-graphic"></div>
                                    
                                        <div class="project__icon icon-code"></div>
                                    
                                </div>
                            </a>
                        </li>
                    
                        <li class="site-nav__project">
                            <a class="project__link" href="/projects/super-deluxe-unscripted-talk-about">
                                <div class="project__body">
                                    <h3 class="project__heading">
                                        Super Deluxe <em>Talk About</em> Prototype
                                    </h3>
                                    <div class="project__description">
                                        UI Wireframe and front-end development for a demo of this free-association TV Game Show concept.
                                    </div>
                                </div>
                                <div class="project__icons">
                                    
                                        <div class="project__icon icon-ux"></div>
                                    
                                        <div class="project__icon icon-code"></div>
                                    
                                </div>
                            </a>
                        </li>
                    
                </ul>
            </div>
        </li>
     
        <li class="site-nav__item">
            <input class="collection-toggle-input invisible" name="website-projects-toggle" id="website-projects-toggle" type="checkbox" value=""/>
            <div class="site-nav__expanded-margin">
                <div class="site-nav__folder-icon"></div>
            </div>
            <div class="site-nav__collection">
                <label for="website-projects-toggle" class="collection-toggle">
                    <h2 class="site-nav__heading">Website Projects</h2>
                    <div class="site-nav__arrow-icon"></div>
                    <p class="site-nav__body collection-body">Various websites I've made</p>
                    <div class="project__icons project__icons--collection">
                        
                        
                        
                        
                        
                            <div class="project__icon icon-graphic"></div>
                        
                            <div class="project__icon icon-ux"></div>
                        
                            <div class="project__icon icon-code"></div>
                        
                    </div>
                    <p class="site-nav__body collection-body-alternate">
                        Projects
                    </p>
                </label>
                <ul class="site-nav__projects dither">
                    
                        <li class="site-nav__project">
                            <a class="project__link" href="/projects/anders-website">
                                <div class="project__body">
                                    <h3 class="project__heading">
                                        Anders Pollack Portfolio 2018
                                    </h3>
                                    <div class="project__description">
                                        A React app for my 2018 portfolio
                                    </div>
                                </div>
                                <div class="project__icons">
                                    
                                        <div class="project__icon icon-graphic"></div>
                                    
                                        <div class="project__icon icon-ux"></div>
                                    
                                        <div class="project__icon icon-code"></div>
                                    
                                </div>
                            </a>
                        </li>
                    
                        <li class="site-nav__project">
                            <a class="project__link" href="/projects/colleen-website">
                                <div class="project__body">
                                    <h3 class="project__heading">
                                        ColleenBaisa.com
                                    </h3>
                                    <div class="project__description">
                                        A small website for Colleen Baisa
                                    </div>
                                </div>
                                <div class="project__icons">
                                    
                                        <div class="project__icon icon-ux"></div>
                                    
                                        <div class="project__icon icon-code"></div>
                                    
                                </div>
                            </a>
                        </li>
                    
                        <li class="site-nav__project">
                            <a class="project__link" href="/projects/don-pollack-website">
                                <div class="project__body">
                                    <h3 class="project__heading">
                                        DonPollack.com
                                    </h3>
                                    <div class="project__description">
                                        Website design and development for Artist Don Pollack
                                    </div>
                                </div>
                                <div class="project__icons">
                                    
                                        <div class="project__icon icon-ux"></div>
                                    
                                        <div class="project__icon icon-code"></div>
                                    
                                </div>
                            </a>
                        </li>
                    
                        <li class="site-nav__project">
                            <a class="project__link" href="/projects/space-agency-website">
                                <div class="project__body">
                                    <h3 class="project__heading">
                                        SpaceAgency.space
                                    </h3>
                                    <div class="project__description">
                                        A small website for a budding newsletter/design collective/creative agency
                                    </div>
                                </div>
                                <div class="project__icons">
                                    
                                        <div class="project__icon icon-graphic"></div>
                                    
                                        <div class="project__icon icon-ux"></div>
                                    
                                        <div class="project__icon icon-code"></div>
                                    
                                </div>
                            </a>
                        </li>
                    
                </ul>
            </div>
        </li>
     
        <li class="site-nav__item">
            <input class="collection-toggle-input invisible" name="tio-toggle" id="tio-toggle" type="checkbox" value=""/>
            <div class="site-nav__expanded-margin">
                <div class="site-nav__folder-icon"></div>
            </div>
            <div class="site-nav__collection">
                <label for="tio-toggle" class="collection-toggle">
                    <h2 class="site-nav__heading">Tuition.io</h2>
                    <div class="site-nav__arrow-icon"></div>
                    <p class="site-nav__body collection-body">UX design and brand collateral for this student loan repayment benefit B2B platform</p>
                    <div class="project__icons project__icons--collection">
                        
                        
                        
                        
                        
                            <div class="project__icon icon-ux"></div>
                        
                            <div class="project__icon icon-code"></div>
                        
                            <div class="project__icon icon-graphic"></div>
                        
                            <div class="project__icon icon-presentation"></div>
                        
                    </div>
                    <p class="site-nav__body collection-body-alternate">
                        Projects
                    </p>
                </label>
                <ul class="site-nav__projects dither">
                    
                        <li class="site-nav__project">
                            <a class="project__link" href="/projects/tio-employee-portal">
                                <div class="project__body">
                                    <h3 class="project__heading">
                                        Tuition.io Employee Portal
                                    </h3>
                                    <div class="project__description">
                                        UX design for the Tuition.io platform
                                    </div>
                                </div>
                                <div class="project__icons">
                                    
                                        <div class="project__icon icon-ux"></div>
                                    
                                </div>
                            </a>
                        </li>
                    
                        <li class="site-nav__project">
                            <a class="project__link" href="/projects/tio-email-templates">
                                <div class="project__body">
                                    <h3 class="project__heading">
                                        Tuition.io Email Templates
                                    </h3>
                                    <div class="project__description">
                                        HTML Email templates for platform onboarding
                                    </div>
                                </div>
                                <div class="project__icons">
                                    
                                        <div class="project__icon icon-ux"></div>
                                    
                                        <div class="project__icon icon-code"></div>
                                    
                                </div>
                            </a>
                        </li>
                    
                        <li class="site-nav__project">
                            <a class="project__link" href="/projects/tio-brand-collateral">
                                <div class="project__body">
                                    <h3 class="project__heading">
                                        Tuition.io Brand Collateral
                                    </h3>
                                    <div class="project__description">
                                        Graphic Design for sales decks and informational material
                                    </div>
                                </div>
                                <div class="project__icons">
                                    
                                        <div class="project__icon icon-graphic"></div>
                                    
                                        <div class="project__icon icon-presentation"></div>
                                    
                                </div>
                            </a>
                        </li>
                    
                </ul>
            </div>
        </li>
     
        <li class="site-nav__item">
            <input class="collection-toggle-input invisible" name="c2st-toggle" id="c2st-toggle" type="checkbox" value=""/>
            <div class="site-nav__expanded-margin">
                <div class="site-nav__folder-icon"></div>
            </div>
            <div class="site-nav__collection">
                <label for="c2st-toggle" class="collection-toggle">
                    <h2 class="site-nav__heading">The Chicago Council on Science and Technology</h2>
                    <div class="site-nav__arrow-icon"></div>
                    <p class="site-nav__body collection-body">Graphic design and web development for a nonprofit organization that promotes science education and outreach</p>
                    <div class="project__icons project__icons--collection">
                        
                        
                        
                        
                        
                            <div class="project__icon icon-graphic"></div>
                        
                            <div class="project__icon icon-ux"></div>
                        
                            <div class="project__icon icon-code"></div>
                        
                    </div>
                    <p class="site-nav__body collection-body-alternate">
                        Projects
                    </p>
                </label>
                <ul class="site-nav__projects dither">
                    
                        <li class="site-nav__project">
                            <a class="project__link" href="/projects/c2st-website">
                                <div class="project__body">
                                    <h3 class="project__heading">
                                        C2ST.org
                                    </h3>
                                    <div class="project__description">
                                        A Wordpress website for the Chicago Council on Science and Technology
                                    </div>
                                </div>
                                <div class="project__icons">
                                    
                                        <div class="project__icon icon-graphic"></div>
                                    
                                        <div class="project__icon icon-ux"></div>
                                    
                                        <div class="project__icon icon-code"></div>
                                    
                                </div>
                            </a>
                        </li>
                    
                        <li class="site-nav__project">
                            <a class="project__link" href="/projects/c2st-newsletter">
                                <div class="project__body">
                                    <h3 class="project__heading">
                                        C2ST Year in Review 2015 - 2017
                                    </h3>
                                    <div class="project__description">
                                        An annual print newsletter for the Chicago Council on Science and Technology
                                    </div>
                                </div>
                                <div class="project__icons">
                                    
                                        <div class="project__icon icon-graphic"></div>
                                    
                                </div>
                            </a>
                        </li>
                    
                </ul>
            </div>
        </li>
    
</ul>

    </nav>
    <article class="project__page">
        <div class="info-header dither">
            <a href="/" class="planets planets--project">
                <div class="planet world world--project"></div>
            </a>
        </div>
        <main class="site-main site-main--project">
            <header class="project__header">
                <div class="project__breadcrumbs">
    <ul class="breadcrumbs">
        <li class="breadcrumbs__item"><a href="/">Home</a></li>
        <li class="breadcrumbs__item">
            
            

            <span>Software Tools</span>
        </li>
    </ul>
</div>

                <div class="page-navigation-desktop">
    












    
    
    
    
        
        
            
            
        
    
        
        
            
            
                
                
                
    
        
        
            
            
        
            
            
        
    
        
        
            
            
        
            
            
        
            
            
        
            
            
        
    
        
        
            
            
        
            
            
        
            
            
        
    
        
        
            
            
        
            
            
        
    


    <a href="/projects/c2st-website" class="page-navigation-desktop__item page-navigation-desktop__item--previous"><span class="page-navigation-desktop__label">Previous:</span><span class="page-navigation-desktop__name">C2ST.org</span></a>
    <div class="page-navigation-desktop__divider"></div>
    <a href="/projects/electric-singing-bowl" class="page-navigation-desktop__item page-navigation-desktop__item--next"><span class="page-navigation-desktop__label">Next:</span><span class="page-navigation-desktop__name">Electric Singing Bowl</span></a>
</div>

            </header>
            <h1 class="project__title">ORCΛ UDP MIDI Translator</h1>
            <div class="project__subheader">
                <p class="project__page-description">
                    A UDP-to-MIDI translator Pd utility for the ORCΛ live-coding environment
                    
                </p>
                <div class="project__icons project__page-icons">
                    
                        <div class="project__icon icon-sound"></div>
                    
                        <div class="project__icon icon-code"></div>
                    
                </div>
            </div>
            <h1 id="what-are-all-these-things">What are all these things?</h1>

<p><a href="https://github.com/hundredrabbits/Orca">ORCΛ</a> is a visual programming language for building sequencers and pattern machines. It is truly delightful, addictive, and expressive, and anyone who enjoys computers that make music should try it out. For a better idea of what ORCΛ can do, check out these links:</p>
<ul>
  <li><a href="https://www.youtube.com/watch?v=WIzI_PSBw6o">Orca Workshop</a></li>
  <li><a href="https://www.youtube.com/watch?v=w9do-qFNAmQ">ORCΛ Time Crystal</a></li>
  <li><a href="https://twitter.com/search?q=ORC%CE%9B&amp;src=typed_query">#ORCΛ</a></li>
  <li><a href="https://twitter.com/Johannes_Knop/status/1220113861451427842?s=20">another sapling, another tree.</a></li>
</ul>

<p><a href="http://puredata.info/">Pure Data (Pd)</a> is a visual programming language for multimedia. I mainly use it as multipurpose audio/MIDI/network glue when I want music apps to communicate. It’s also great for making audio samplers, <a href="https://www.automatonism.com/">synthesizers</a>, live visuals, and <a href="electric-singing-bowl">Electric Singing Bowls</a>.</p>

<h1 id="why">Why?</h1>

<p>Some background — I’ve been using the <a href="https://github.com/hundredrabbits/Orca-c">C port</a> of ORCΛ, as it runs just as nicely on a Raspberry Pi over SSH as it does on my 10-year-old Macbook Pro. I was even able to build and run it on my iPad inside of <a href="https://ish.app/">iSH</a>, an emulated Linux shell runs on iOS. It seemed like an ideal setup — ORCΛ running on my most portable device with access to all of the music software that I’ve paid actual money for!</p>

<p>Except <a href="https://wiki.alpinelinux.org/wiki/Alpine_Linux_package_management">APK</a> doesn’t have a portmidi package, an optional ORCΛ dependency that enables MIDI support, which meant that my iSH build of ORCΛ was totally cut off from the rest of my apps — totally useless. I could have attempted to build portmidi from source inside iSH, but even then it seemed unlikely that it would be magically capable of communicating with an iOS app from inside a Linux sandbox.</p>

<p>However, ORCΛ speaks OSC (<a href="https://en.wikipedia.org/wiki/Open_Sound_Control">open sound control</a>) and UDP with its <code class="highlighter-rouge">=</code> and <code class="highlighter-rouge">;</code> operators, and there was nothing preventing iSH from communicating over a network!</p>

<p><em>insert image of orca operators</em></p>

<p>The only remaining task would be listening to embedded ORCΛ’s network messages and translating them into usable MIDI output — a perfect job for a Pure Data patch, hosted by danomatika’s wonderful <a href="https://github.com/danomatika/PdParty">PdParty</a> app.</p>

<h1 id="some-issues">Some Issues</h1>

<p>Initially I planned to use the <code class="highlighter-rouge">=</code> operator and send Pd messages in the form of</p>

<p><code class="highlighter-rouge">=a505Czz</code></p>

<p>as ORCΛ’s <code class="highlighter-rouge">=</code> needs to start with a path parameter (the <code class="highlighter-rouge">a</code>), and a number indicating the amount of items included in the OSC message (<code class="highlighter-rouge">5</code>). This was hardly ideal, as it would be in a different format than a normal ORCΛ MIDI message, and the extra characters would add just a bit too much extra mental overhead for ORCΛ-on-iPad to still feel like a fun time.</p>

<p>Additionally, Pd’s <code class="highlighter-rouge">oscparse</code> object wouldn’t distinguish between a capital or lowercase letter sent from ORCΛ. so only natural notes would be allowed, unless I included another parameter for sharp/flat:</p>

<p><code class="highlighter-rouge">=a605Dbzz</code></p>

<p>where I could add something like a <code class="highlighter-rouge">b</code> (flat) or <code class="highlighter-rouge">s</code> (for sharp? — <code class="highlighter-rouge">#</code> already being the syntax for ORCΛ comments) after the root note. Needless to say, MIDI-over-OSC was not going to work.</p>

<p><em>picture of capital and lowercase OSC message in ORCΛ</em></p>

<p>The only remaining solution was to use <code class="highlighter-rouge">;</code> and parse the raw binary output from <code class="highlighter-rouge">netreceive</code>. Not only would this resolve the captial/lowercase problem, it would allow for UDP MIDI notes to be visually identical to ORCΛ’s MIDI notes, just with a <code class="highlighter-rouge">;</code> instead of a <code class="highlighter-rouge">:</code></p>

<p><em>picture of both side by side in ORCΛ</em></p>

<h1 id="fixing-things">Fixing Things</h1>

<p><em>picture of working note patch</em></p>

<p>With functioning UDP MIDI set up to work exactly the same as ORCΛ’s MIDI operator, I decided to address some issues I had encountered with ORCΛ itself — namely the 0-indexed MIDI channel numbers, a lack of omni-channel messages, and an inability to introduce off-beat timing in between ORCΛ’s ‘frames’ without resorting to weird double-time BPM hacks.</p>

<p><em>video of weird doubletime junk</em></p>

<p>The first adjustment was simple enough. Instead of treating channel <code class="highlighter-rouge">0</code> as channel 1 (which feels like a programmer quirk to me), <code class="highlighter-rouge">0</code> would be a new omni channel (thanks to Pd), and channel <code class="highlighter-rouge">1</code> would actually mean channel 1.</p>

<h1 id="breaking-the-grid">Breaking the grid</h1>

<p>To encourage ORCΛ to play notes a bit more loosely, I decided one extra parameter would be allowed. The sixth character in an ORCΛ UDP MIDI would add small increments of time to delay the attack of the current note. Determining how this timing would work with the current BPM  was a bit tricky, but I ultimately decided on steps of 1/18 of a quarter note, so that a delay of <code class="highlighter-rouge">z</code> on a note being hit once per measure would be offset exactly two beats, and <code class="highlighter-rouge">0–9</code> would be a nice subtle range of delay values for expressive keyboard control.</p>

<p><em>video of delay operator doing cool things</em></p>

<p>I’m really pleased with the results of the extra delay parameter. Combined with unpredictable network latency and random UDP packet loss between iSH and PdParty it yielded something close to one of GarageBand’s goofy automatic drummers, but with a looser, more chaotic style.</p>

<p><em>sound sample from garageband</em></p>

<h1 id="more-issues">More Issues</h1>

<p>Aside from the unavoidable issues of UDP reliability, I encountered one final dealbreaker — sending a single <code class="highlighter-rouge">;</code> message without any parameters to my patch would immediately crash Pure Data (and often take IAC Driver down with it). It ain’t great when a wrong note also kills your whole rig!</p>

<p>Thankfully, the mrpeach <code class="highlighter-rouge">udpreceive</code> external worked as a drop-in replacement for <code class="highlighter-rouge">netreceive</code>. Only now I was unable to run my translator in PdParty at all, as it doesn’t include all of the mrpeach externals. 😞</p>

<p>With a Pd-vanilla version that uses <code class="highlighter-rouge">netreceive</code> and crashes with incorrectly formatted data, and a totally flawless version that won’t run on the iPad, my original intent was sort of achieved: a portable ORCΛ machine that can be set to drum badly on purpose.</p>

<p><em>video of ORCΛ running on ipad sort of well</em></p>

<h1 id="moving-forward">Moving Forward</h1>

<p>To make this thing more useful and to help justify the weekend of work that went into finding and almost solving all these problems, the next step for this ORCΛ UDP MIDI Translator will be adding Ableton Link support via <a href="https://github.com/libpd/abl_link"><code class="highlighter-rouge">abl_link~</code></a>, allowing ORCΛ to magically change everything else’s tempo. Update soon!</p>

        </main>
        <div class="page-navigation">
    












    
    
    
    
        
        
            
            
        
    
        
        
            
            
                
                
                
    
        
        
            
            
        
            
            
        
    
        
        
            
            
        
            
            
        
            
            
        
            
            
        
    
        
        
            
            
        
            
            
        
            
            
        
    
        
        
            
            
        
            
            
        
    


    <a href="/projects/c2st-website" class="page-navigation__item page-navigation__item--previous dither dither--3">
    </a>
    <a href="/projects/electric-singing-bowl" class="page-navigation__item page-navigation__item--next dither dither--3">
    </a>
    <a href="#top" class="back-to-top">Back to Top</a>
</div>

    </article>
</body>

</html>
